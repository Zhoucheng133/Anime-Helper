import{c as F,r as B,o as I,a as E,b as M,m as H,e as d,f as p,g as l,u as o,w as t,i as v,F as k,j as u,p as C,h as _,k as r,n as K,v as T,t as b}from"./index-iTMpOYeB.js";import{t as R,H as q,_ as z}from"./token-zDjAYmwP.js";import{l as S,b as n}from"./adder-CdbqQOny.js";import{_ as G}from"./_plugin-vue_export-helper-BsQhiAd-.js";const J={key:0,class:"body"},P={class:"modalContent"},Q={style:{"margin-top":"10px",display:"grid","align-items":"center","grid-template-columns":"70px auto"}},W={style:{"margin-top":"10px",display:"grid","align-items":"center","grid-template-columns":"70px auto"}},X={style:{"margin-top":"10px",display:"grid","align-items":"center","grid-template-columns":"70px auto"}},Y={style:{"margin-top":"10px",display:"grid","align-items":"center","grid-template-columns":"70px auto"}},Z=F({__name:"BangumiView",setup(h){document.title="AnimeHelper | 每日更新";let m=B([]);const f=g=>!!S().dataSource.find(i=>i.title==g),V=B([0,1,2,3,4,5,6]);let A=B(!0);const c=(g,e)=>{if(f(g)){H.error("列表中已存在");return}n().showAdd=!0,n().add_title=g,n().add_weekday=e,n().add_onUpdate=!0};return I(async()=>{R().getToken();const g=(await E.get(`${M}/api/calendar`,{headers:{token:localStorage.getItem("token")}})).data;g.ok?m.value=g.msg:H.error("请求失败"),S().dataSource.length==0&&await S().getList(),A.value=!1}),(g,e)=>{const i=u("a-tag"),y=u("a-flex"),w=u("a-collapse-panel"),L=u("a-collapse"),N=u("a-input"),O=u("a-checkbox"),$=u("a-input-number"),x=u("a-select-option"),j=u("a-select"),D=u("a-modal");return d(),p(k,null,[l(q),o(A)?(d(),v(z,{key:1})):(d(),p("div",J,[l(L,{activeKey:V.value,"onUpdate:activeKey":e[0]||(e[0]=a=>V.value=a)},{default:t(()=>[l(w,{key:"0",header:"星期日"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[0],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,0)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),l(w,{key:"1",header:"星期一"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[1],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,1)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),l(w,{key:"2",header:"星期二"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[2],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,2)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),l(w,{key:"3",header:"星期三"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[3],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,3)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),l(w,{key:"4",header:"星期四"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[4],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,4)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),l(w,{key:"5",header:"星期五"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[5],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,5)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1}),l(w,{key:"6",header:"星期六"},{default:t(()=>[l(y,{wrap:"wrap",gap:"middle"},{default:t(()=>[(d(!0),p(k,null,C(o(m)[6],(a,s)=>(d(),v(i,{class:"item",key:s,color:f(a)?"blue":"",onClick:U=>c(a,6)},{default:t(()=>[r(b(a),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["activeKey"])])),l(D,{open:o(n)().showAdd,"onUpdate:open":e[7]||(e[7]=a=>o(n)().showAdd=a),title:"添加一个新的番剧",onOk:o(n)().handleOk,centered:""},{default:t(()=>[_("div",P,[l(N,{placeholder:"番剧标题",value:o(n)().add_title,"onUpdate:value":e[1]||(e[1]=a=>o(n)().add_title=a)},null,8,["value"]),l(O,{style:{"margin-top":"10px"},checked:o(n)().add_onUpdate,"onUpdate:checked":e[2]||(e[2]=a=>o(n)().add_onUpdate=a),onChange:o(n)().changeUpdate},{default:t(()=>e[8]||(e[8]=[r("当前在更新")])),_:1},8,["checked","onChange"]),_("div",Q,[e[9]||(e[9]=_("div",{style:{"margin-right":"10px"}},"集数",-1)),l($,{value:o(n)().add_episodes,"onUpdate:value":e[3]||(e[3]=a=>o(n)().add_episodes=a),min:1},null,8,["value"])]),_("div",W,[e[10]||(e[10]=_("div",{style:{"margin-right":"10px"}},"观看至",-1)),l($,{value:o(n)().add_now,"onUpdate:value":e[4]||(e[4]=a=>o(n)().add_now=a),min:0,max:o(n)().judge()},null,8,["value","max"])]),K(_("div",X,[e[11]||(e[11]=_("div",{style:{"margin-right":"10px"}},"更新至",-1)),l($,{value:o(n)().add_updateTo,"onUpdate:value":e[5]||(e[5]=a=>o(n)().add_updateTo=a),min:1,max:o(n)().add_episodes},null,8,["value","max"])],512),[[T,o(n)().add_onUpdate]]),K(_("div",Y,[e[19]||(e[19]=_("div",{style:{"margin-right":"10px"}},"更新日期",-1)),l(j,{value:o(n)().add_weekday,"onUpdate:value":e[6]||(e[6]=a=>o(n)().add_weekday=a)},{default:t(()=>[l(x,{value:0},{default:t(()=>e[12]||(e[12]=[r("星期日")])),_:1}),l(x,{value:1},{default:t(()=>e[13]||(e[13]=[r("星期一")])),_:1}),l(x,{value:2},{default:t(()=>e[14]||(e[14]=[r("星期二")])),_:1}),l(x,{value:3},{default:t(()=>e[15]||(e[15]=[r("星期三")])),_:1}),l(x,{value:4},{default:t(()=>e[16]||(e[16]=[r("星期四")])),_:1}),l(x,{value:5},{default:t(()=>e[17]||(e[17]=[r("星期五")])),_:1}),l(x,{value:6},{default:t(()=>e[18]||(e[18]=[r("星期六")])),_:1})]),_:1},8,["value"])],512),[[T,o(n)().add_onUpdate]])])]),_:1},8,["open","onOk"])],64)}}}),oe=G(Z,[["__scopeId","data-v-80e213d6"]]);export{oe as default};
